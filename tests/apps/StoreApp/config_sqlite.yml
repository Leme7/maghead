---
cli:
  bootstrap: vendor/autoload.php
schema:
  auto_id: true
  base_model: \Maghead\Runtime\BaseModel
  base_collection: \Maghead\Runtime\BaseCollection
  paths:
  - tests
instance:
  local:
    dsn: 'mysql:host=localhost'
    driver: mysql
    host: localhost
    user: root
sharding:
  mappings:
    M_store_id:
      key: store_id
      shards: [s1, s2, s3]
      chunks:
        c1: { shard: s1 }
        c2: { shard: s2 }
      hash:
        target1: c1
        target2: c2
  shards:
    s1:
      write:
        node1:
          weight: 1
      read:
        node1:
          weight: 1
    s2:
      write:
        node2:
          weight: 1
      read:
        node2:
          weight: 1
    s3:
      write:
        node3:
          weight: 1
      read:
        node3:
          weight: 1
data_source:
  master: node_master
  nodes:
    node_master:
      dsn: sqlite:node_master.sqlite
      query_options:
        quote_table: true
      driver: sqlite
      connection_options: []
      user: ~
      password: ~
    node1:
      dsn: sqlite:node1.sqlite
      query_options:
        quote_table: true
      driver: sqlite
      connection_options: []
      user: ~
      password: ~
    node2:
      dsn: sqlite:node2.sqlite
      query_options:
        quote_table: true
      driver: sqlite
      connection_options: []
      user: ~
      password: ~
    node3:
      dsn: sqlite:node3.sqlite
      query_options:
        quote_table: true
      driver: sqlite
      connection_options: []
      user: ~
      password: ~
